!function(e){function n(n){for(var r,u,s=n[0],a=n[1],c=n[2],l=0,d=[];l<s.length;l++)u=s[l],o[u]&&d.push(o[u][0]),o[u]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(f&&f(n);d.length;)d.shift()();return i.push.apply(i,c||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,s=1;s<t.length;s++){var a=t[s];0!==o[a]&&(r=!1)}r&&(i.splice(n--,1),e=u(u.s=t[0]))}return e}var r={},o={1:0},i=[];function u(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.m=e,u.c=r,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)u.d(t,r,function(n){return e[n]}.bind(null,r));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="",u.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],a=s.push.bind(s);s.push=n,s=s.slice();for(var c=0;c<s.length;c++)n(s[c]);var f=a;i.push([167,0]),t()}({167:function(e,n,t){"use strict";(function(){var e=function(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){return function r(o,i){try{var u=n[o](i),s=u.value}catch(e){return void t(e)}if(!u.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("div"),e.next=3,t.e(0).then(t.t.bind(null,397,7));case 3:return r=e.sent,o=r.default,n.innerHTML=o.join(["Hello","react webpack"]," "),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}))})(),r(t(60)),t(82),r(t(176)),r(t(177));function r(e){return e&&e.__esModule?e:{default:e}}},176:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i(t(60)),o=i(t(82));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){return r.default.createElement("div",null,r.default.createElement("p",null,"React here!"))};n.default=u,o.default.render(r.default.createElement(u,null),document.getElementById("app"))},177:function(e,n,t){"use strict";(function(e,n){var r=a(t(178)),o=a(t(13)),i=a(t(303)),u=a(t(379)),s=a(t(387));function a(e){return e&&e.__esModule?e:{default:e}}r.default.setGCMAPIKey("AIzaSyAcWFi5XIFAY_L9Kkfh2fT46p_rFJyjDHA");var c="BOew5Tx7fTX51GzJ7tpF3dDLNS54OvUST_dGGqzJEy54jqW2qghIRTiK7BfOpCPp8xNfMH7Mtprl3hp_WGjgslU",f="ymblNrJSzlXdRMhFYdXh1Hda8HkIO76aVs85X93wAjc";r.default.setVapidDetails("mailto:donaldboulton@gmail.com",c,f);var l=new s.default({filename:o.default.join(e,"public/subscription-store.db"),autoload:!0});function d(){return new Promise(function(e,n){l.find({},function(t,r){t?n(t):e(r)})})}var p=(0,i.default)();p.use(i.default.static(o.default.join(e,"/"))),p.use(u.default.json()),p.use(u.default.text()),p.post("/api/save-subscription/",function(e,n){if(function(e,n){return!(!e.body||!e.body.endpoint)||(n.status(400),n.setHeader("Content-Type","application/json"),n.send(JSON.stringify({error:{id:"no-endpoint",message:"Subscription must have an endpoint."}})),!1)}(e,n))return function(e){return new Promise(function(n,t){l.insert(e,function(e,r){e?t(e):n(r._id)})})}(e.body).then(function(e){n.setHeader("Content-Type","application/json"),n.send(JSON.stringify({data:{success:!0}}))}).catch(function(e){n.status(500),n.setHeader("Content-Type","application/json"),n.send(JSON.stringify({error:{id:"unable-to-save-subscription",message:"The subscription was received but we were unable to save it to our database."}}))})}),p.post("/api/get-subscriptions/",function(e,n){return d().then(function(e){var t=e.map(function(e){return{id:e._id,endpoint:e.endpoint}});n.setHeader("Content-Type","application/json"),n.send(JSON.stringify({data:{subscriptions:t}}))}).catch(function(e){n.status(500),n.setHeader("Content-Type","application/json"),n.send(JSON.stringify({error:{id:"unable-to-get-subscriptions",message:"We were unable to get the subscriptions from our database."}}))})});var v=function(e,n){return r.default.sendNotification(e,n).catch(function(n){if(410===n.statusCode)return function(e){return new Promise(function(n,t){l.remove({_id:e},{},function(e){e?t(e):n()})})}(e._id);console.log("Subscription is no longer valid: ",n)})};p.post("/api/trigger-push-msg/",function(e,n){var t=JSON.stringify(e.body);return d().then(function(e){for(var n=Promise.resolve(),r=function(r){var o=e[r];n=n.then(function(){return v(o,t)})},o=0;o<e.length;o++)r(o);return n}).then(function(){n.setHeader("Content-Type","application/json"),n.send(JSON.stringify({data:{success:!0}}))}).catch(function(e){n.status(500),n.setHeader("Content-Type","application/json"),n.send(JSON.stringify({error:{id:"unable-to-send-messages",message:"We were unable to send messages to all subscriptions : '"+e.message+"'"}}))})});var b=n.env.PORT||3e3,h=(p.listen(b,function(){console.log("Running on http://localhost:"+b)}),new(t(396)));h.postMessage("pageB"),h.onmessage=function(e){e.data}}).call(this,"/",t(3))},183:function(e,n){},185:function(e,n){},218:function(e,n){},219:function(e,n){},288:function(e,n){},290:function(e,n){},325:function(e,n){},326:function(e,n){},352:function(e,n){},357:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=357},396:function(e,n,t){e.exports=function(){return new Worker(t.p+"hash.worker.js")}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9BcHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2V4cHJlc3MvbGliIHN5bmMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dvcmtlci5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsImRhdGEiLCJtb2R1bGVJZCIsImNodW5rSWQiLCJjaHVua0lkcyIsIm1vcmVNb2R1bGVzIiwiZXhlY3V0ZU1vZHVsZXMiLCJpIiwicmVzb2x2ZXMiLCJsZW5ndGgiLCJpbnN0YWxsZWRDaHVua3MiLCJwdXNoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibW9kdWxlcyIsInBhcmVudEpzb25wRnVuY3Rpb24iLCJzaGlmdCIsImRlZmVycmVkTW9kdWxlcyIsImFwcGx5IiwiY2hlY2tEZWZlcnJlZE1vZHVsZXMiLCJyZXN1bHQiLCJkZWZlcnJlZE1vZHVsZSIsImZ1bGZpbGxlZCIsImoiLCJkZXBJZCIsInNwbGljZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIjEiLCJleHBvcnRzIiwibW9kdWxlIiwibCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwIiwib2UiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiX2NhbGxlZSIsImVsZW1lbnQiLCJfcmVmMiIsIl8iLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJ3cmFwIiwiX2NvbnRleHQiLCJwcmV2IiwibmV4dCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImUiLCJ0aGVuIiwic2VudCIsImRlZmF1bHQiLCJpbm5lckhUTUwiLCJqb2luIiwiYWJydXB0Iiwic3RvcCIsInRoaXMiLCJBcHAiLCJfcmVhY3QyIiwiUmVhY3RET00iLCJyZW5kZXIiLCJnZXRFbGVtZW50QnlJZCIsIndlYnB1c2giLCJzZXRHQ01BUElLZXkiLCJ2YXBpZEtleXMiLCJzZXRWYXBpZERldGFpbHMiLCJkYiIsIkRhdGFzdG9yZSIsImZpbGVuYW1lIiwicGF0aCIsIl9fZGlybmFtZSIsImF1dG9sb2FkIiwiZ2V0U3Vic2NyaXB0aW9uc0Zyb21EYXRhYmFzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmluZCIsImRvY3MiLCJhcHAiLCJfZXhwcmVzczIiLCJ1c2UiLCJleHByZXNzIiwic3RhdGljIiwiYm9keVBhcnNlciIsImpzb24iLCJ0ZXh0IiwicG9zdCIsInJlcSIsInJlcyIsImJvZHkiLCJlbmRwb2ludCIsInN0YXR1cyIsInNldEhlYWRlciIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiaWQiLCJtZXNzYWdlIiwiaXNWYWxpZFNhdmVSZXF1ZXN0Iiwic3Vic2NyaXB0aW9uIiwiaW5zZXJ0IiwibmV3RG9jIiwiX2lkIiwic2F2ZVN1YnNjcmlwdGlvblRvRGF0YWJhc2UiLCJzdWJzY3JpcHRpb25JZCIsInN1Y2Nlc3MiLCJjYXRjaCIsInN1YnNjcmlwdGlvbnMiLCJyZWR1Y2VkU3Vic2NyaXB0aW9ucyIsIm1hcCIsInRyaWdnZXJQdXNoTXNnIiwiZGF0YVRvU2VuZCIsInNlbmROb3RpZmljYXRpb24iLCJzdGF0dXNDb2RlIiwicmVtb3ZlIiwiZGVsZXRlU3Vic2NyaXB0aW9uRnJvbURhdGFiYXNlIiwibG9nIiwicHJvbWlzZUNoYWluIiwiX2xvb3AiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJ3b3JrZXIiLCJsaXN0ZW4iLCJwb3N0TWVzc2FnZSIsIm9ubWVzc2FnZSIsImV2ZW50Iiwid2VicGFja0VtcHR5Q29udGV4dCIsIkVycm9yIiwiY29kZSIsImtleXMiLCJXb3JrZXIiXSwibWFwcGluZ3MiOiJhQUNBLFNBQUFBLEVBQUFDLEdBUUEsSUFQQSxJQU1BQyxFQUFBQyxFQU5BQyxFQUFBSCxFQUFBLEdBQ0FJLEVBQUFKLEVBQUEsR0FDQUssRUFBQUwsRUFBQSxHQUlBTSxFQUFBLEVBQUFDLEtBQ1FELEVBQUFILEVBQUFLLE9BQW9CRixJQUM1QkosRUFBQUMsRUFBQUcsR0FDQUcsRUFBQVAsSUFDQUssRUFBQUcsS0FBQUQsRUFBQVAsR0FBQSxJQUVBTyxFQUFBUCxHQUFBLEVBRUEsSUFBQUQsS0FBQUcsRUFDQU8sT0FBQUMsVUFBQUMsZUFBQUMsS0FBQVYsRUFBQUgsS0FDQWMsRUFBQWQsR0FBQUcsRUFBQUgsSUFLQSxJQUZBZSxLQUFBaEIsR0FFQU8sRUFBQUMsUUFDQUQsRUFBQVUsT0FBQVYsR0FPQSxPQUhBVyxFQUFBUixLQUFBUyxNQUFBRCxFQUFBYixPQUdBZSxJQUVBLFNBQUFBLElBRUEsSUFEQSxJQUFBQyxFQUNBZixFQUFBLEVBQWlCQSxFQUFBWSxFQUFBVixPQUE0QkYsSUFBQSxDQUc3QyxJQUZBLElBQUFnQixFQUFBSixFQUFBWixHQUNBaUIsR0FBQSxFQUNBQyxFQUFBLEVBQWtCQSxFQUFBRixFQUFBZCxPQUEyQmdCLElBQUEsQ0FDN0MsSUFBQUMsRUFBQUgsRUFBQUUsR0FDQSxJQUFBZixFQUFBZ0IsS0FBQUYsR0FBQSxHQUVBQSxJQUNBTCxFQUFBUSxPQUFBcEIsSUFBQSxHQUNBZSxFQUFBTSxJQUFBQyxFQUFBTixFQUFBLEtBR0EsT0FBQUQsRUFJQSxJQUFBUSxLQUtBcEIsR0FDQXFCLEVBQUEsR0FHQVosS0FRQSxTQUFBUyxFQUFBMUIsR0FHQSxHQUFBNEIsRUFBQTVCLEdBQ0EsT0FBQTRCLEVBQUE1QixHQUFBOEIsUUFHQSxJQUFBQyxFQUFBSCxFQUFB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QUFjbEksR0FDbkM0SSxFQUFlQSxFQUFhcEUsS0FBSyxXQUMvQixPQUFPNkQsRUFBZVgsRUFBY1ksTUFIL0J0SSxFQUFJLEVBQUdBLEVBQUlrSSxFQUFjaEksT0FBUUYsSUFBSzZJLEVBQXRDN0ksR0FPVCxPQUFPNEksSUFHUnBFLEtBQUssV0FDSnVDLEVBQUlJLFVBQVUsZUFBZ0Isb0JBQzVCSixFQUFJSyxLQUFLQyxLQUFLQyxXQUFZNUgsTUFBUXNJLFNBQVMsUUFFOUNDLE1BQU0sU0FBUzVFLEdBQ2QwRCxFQUFJRyxPQUFPLEtBQ1hILEVBQUlJLFVBQVUsZUFBZ0Isb0JBQzlCSixFQUFJSyxLQUFLQyxLQUFLQyxXQUNaL0QsT0FDRWdFLEdBQUksMEJBQ0pDLFFBQVMsMkRBQ0huRSxFQUFJbUUsUUFERCxZQVFqQixJQUFNc0IsRUFBT0MsRUFBUUMsSUFBSUMsTUFBUSxJQU8vQkMsR0FMYTdDLEVBQUk4QyxPQUFPTCxFQUFNLFdBQzlCeEYsUUFBUXFGLElBQUksK0JBQWlDRyxLQUlwQyxJQURBekgsRUFBUSxPQUVyQjZILEVBQU9FLFlBQVksU0FDbkJGLEVBQU9HLFVBQVksU0FBU0MsR0FDUEEsRUFBTTVKLG1PQy9MM0IsU0FBQTZKLEVBQUF6QyxHQUNBLElBQUF2QyxFQUFBLElBQUFpRixNQUFBLHVCQUFBMUMsRUFBQSxLQUVBLE1BREF2QyxFQUFBa0YsS0FBQSxtQkFDQWxGLEVBRUFnRixFQUFBRyxLQUFBLFdBQXVDLFVBQ3ZDSCxFQUFBdEQsUUFBQXNELEVBQ0E3SCxFQUFBRCxRQUFBOEgsRUFDQUEsRUFBQWhDLEdBQUEseUJDUkE3RixFQUFBRCxRQUFBLFdBQ0EsV0FBQWtJLE9BQUF0SSxFQUFBOEIsRUFBQSIsImZpbGUiOiJpbmRleC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQxOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIHNjcmlwdCBwYXRoIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBqc29ucFNjcmlwdFNyYyhjaHVua0lkKSB7XG4gXHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcInNlcnZlci5idW5kbGUuanNcIlxuIFx0fVxuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBvbiBlcnJvciBmdW5jdGlvbiBmb3IgYXN5bmMgbG9hZGluZ1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vZSA9IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmVycm9yKGVycik7IHRocm93IGVycjsgfTtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goWzE2NywwXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsIi8vIGluc2lkZSBzcmMvaW5kZXguanNcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3JlbmRlcn0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBBcHAgZnJvbSBcIi4vQXBwXCI7XG5pbXBvcnQgbWFpbiBmcm9tIFwiLi9tYWluXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGdldENvbXBvbmVudCgpIHtcbiAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICBjb25zdCB7IGRlZmF1bHQ6IF8gfSA9IGF3YWl0IGltcG9ydCgnbG9kYXNoJyk7XG4gICBlbGVtZW50LmlubmVySFRNTCA9IF8uam9pbihbJ0hlbGxvJywgJ3JlYWN0IHdlYnBhY2snXSwgJyAnKTtcbiAgIHJldHVybiBlbGVtZW50O1xufVxuXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xuXG5jb25zdCBBcHAgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxwPlJlYWN0IGhlcmUhPC9wPlxuICAgIDwvZGl2PlxuICApO1xufTtcbmV4cG9ydCBkZWZhdWx0IEFwcDtcblJlYWN0RE9NLnJlbmRlcig8QXBwIC8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKSk7XG4iLCJpbXBvcnQgd2VicHVzaCBmcm9tICd3ZWItcHVzaCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IERhdGFzdG9yZSBmcm9tICduZWRiJztcblxud2VicHVzaC5zZXRHQ01BUElLZXkoJ0FJemFTeUFjV0ZpNVhJRkFZX0w5S2tmaDJmVDQ2cF9yRkp5akRIQScpO1xuXG5jb25zdCB2YXBpZEtleXMgPSB7XG4gICAgcHVibGljS2V5OiAnQk9ldzVUeDdmVFg1MUd6Sjd0cEYzZERMTlM1NE92VVNUX2RHR3F6SkV5NTRqcVcycWdoSVJUaUs3QmZPcENQcDh4TmZNSDdNdHBybDNocF9XR2pnc2xVJyxcbiAgICBwcml2YXRlS2V5OiAneW1ibE5ySlN6bFhkUk1oRllkWGgxSGRhOEhrSU83NmFWczg1WDkzd0FqYycsXG59O1xuXG53ZWJwdXNoLnNldFZhcGlkRGV0YWlscyhcbiAgJ21haWx0bzpkb25hbGRib3VsdG9uQGdtYWlsLmNvbScsXG4gIHZhcGlkS2V5cy5wdWJsaWNLZXksXG4gIHZhcGlkS2V5cy5wcml2YXRlS2V5XG4pO1xuXG5jb25zdCBkYiA9IG5ldyBEYXRhc3RvcmUoe1xuICAgIGZpbGVuYW1lOiBwYXRoLmpvaW4oX19kaXJuYW1lLCAncHVibGljL3N1YnNjcmlwdGlvbi1zdG9yZS5kYicpLFxuICAgIGF1dG9sb2FkOiB0cnVlXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHNhdmVTdWJzY3JpcHRpb25Ub0RhdGFiYXNlKHN1YnNjcmlwdGlvbikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGRiLmluc2VydChzdWJzY3JpcHRpb24sIGZ1bmN0aW9uKGVyciwgbmV3RG9jKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKG5ld0RvYy5faWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0U3Vic2NyaXB0aW9uc0Zyb21EYXRhYmFzZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBkYi5maW5kKHt9LCBmdW5jdGlvbihlcnIsIGRvY3MpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc29sdmUoZG9jcyk7XG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVsZXRlU3Vic2NyaXB0aW9uRnJvbURhdGFiYXNlKHN1YnNjcmlwdGlvbklkKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGRiLnJlbW92ZSh7X2lkOiBzdWJzY3JpcHRpb25JZCB9LCB7fSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IGlzVmFsaWRTYXZlUmVxdWVzdCA9IChyZXEsIHJlcykgPT4ge1xuICAgIC8vIENoZWNrIHRoZSByZXF1ZXN0IGJvZHkgaGFzIGF0IGxlYXN0IGFuIGVuZHBvaW50LlxuICAgIGlmICghcmVxLmJvZHkgfHwgIXJlcS5ib2R5LmVuZHBvaW50KSB7XG4gICAgICAvLyBOb3QgYSB2YWxpZCBzdWJzY3JpcHRpb24uXG4gICAgICByZXMuc3RhdHVzKDQwMCk7XG4gICAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGlkOiAnbm8tZW5kcG9pbnQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWJzY3JpcHRpb24gbXVzdCBoYXZlIGFuIGVuZHBvaW50LidcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy8nKSkpO1xuICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbiAgYXBwLnVzZShib2R5UGFyc2VyLnRleHQoKSk7XG5cbiAgYXBwLnBvc3QoJy9hcGkvc2F2ZS1zdWJzY3JpcHRpb24vJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG5cbiAgICBpZiAoIWlzVmFsaWRTYXZlUmVxdWVzdChyZXEsIHJlcykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2F2ZVN1YnNjcmlwdGlvblRvRGF0YWJhc2UocmVxLmJvZHkpXG4gICAgLnRoZW4oZnVuY3Rpb24oc3Vic2NyaXB0aW9uSWQpIHtcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeSh7IGRhdGE6IHsgc3VjY2VzczogdHJ1ZSB9IH0pKTtcbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKTtcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgaWQ6ICd1bmFibGUtdG8tc2F2ZS1zdWJzY3JpcHRpb24nLFxuICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgc3Vic2NyaXB0aW9uIHdhcyByZWNlaXZlZCBidXQgd2Ugd2VyZSB1bmFibGUgdG8gc2F2ZSBpdCB0byBvdXIgZGF0YWJhc2UuJ1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGFwcC5wb3N0KCcvYXBpL2dldC1zdWJzY3JpcHRpb25zLycsIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuXG4gICAgcmV0dXJuIGdldFN1YnNjcmlwdGlvbnNGcm9tRGF0YWJhc2UoKVxuICAgIC50aGVuKGZ1bmN0aW9uKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgIGNvbnN0IHJlZHVjZWRTdWJzY3JpcHRpb25zID0gc3Vic2NyaXB0aW9ucy5tYXAoKHN1YnNjcmlwdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBzdWJzY3JpcHRpb24uX2lkLFxuICAgICAgICAgIGVuZHBvaW50OiBzdWJzY3JpcHRpb24uZW5kcG9pbnRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeSh7IGRhdGE6IHsgc3Vic2NyaXB0aW9uczogcmVkdWNlZFN1YnNjcmlwdGlvbnMgfSB9KSk7XG4gICAgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCk7XG4gICAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGlkOiAndW5hYmxlLXRvLWdldC1zdWJzY3JpcHRpb25zJyxcbiAgICAgICAgICBtZXNzYWdlOiAnV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IHRoZSBzdWJzY3JpcHRpb25zIGZyb20gb3VyIGRhdGFiYXNlLidcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCB0cmlnZ2VyUHVzaE1zZyA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbiwgZGF0YVRvU2VuZCkge1xuICAgIHJldHVybiB3ZWJwdXNoLnNlbmROb3RpZmljYXRpb24oc3Vic2NyaXB0aW9uLCBkYXRhVG9TZW5kKVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyLnN0YXR1c0NvZGUgPT09IDQxMCkge1xuICAgICAgICByZXR1cm4gZGVsZXRlU3Vic2NyaXB0aW9uRnJvbURhdGFiYXNlKHN1YnNjcmlwdGlvbi5faWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbiBpcyBubyBsb25nZXIgdmFsaWQ6ICcsIGVycik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgYXBwLnBvc3QoJy9hcGkvdHJpZ2dlci1wdXNoLW1zZy8nLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcblxuICAgIGNvbnN0IGRhdGFUb1NlbmQgPSBKU09OLnN0cmluZ2lmeShyZXEuYm9keSk7XG5cbiAgICByZXR1cm4gZ2V0U3Vic2NyaXB0aW9uc0Zyb21EYXRhYmFzZSgpXG4gICAgLnRoZW4oZnVuY3Rpb24oc3Vic2NyaXB0aW9ucykge1xuICAgICAgbGV0IHByb21pc2VDaGFpbiA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN1YnNjcmlwdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uc1tpXTtcbiAgICAgICAgcHJvbWlzZUNoYWluID0gcHJvbWlzZUNoYWluLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0cmlnZ2VyUHVzaE1zZyhzdWJzY3JpcHRpb24sIGRhdGFUb1NlbmQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21pc2VDaGFpbjtcbiAgICB9KVxuXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBkYXRhOiB7IHN1Y2Nlc3M6IHRydWUgfSB9KSk7XG4gICAgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCk7XG4gICAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGlkOiAndW5hYmxlLXRvLXNlbmQtbWVzc2FnZXMnLFxuICAgICAgICAgIG1lc3NhZ2U6IGBXZSB3ZXJlIHVuYWJsZSB0byBzZW5kIG1lc3NhZ2VzIHRvIGFsbCBzdWJzY3JpcHRpb25zIDogYCArXG4gICAgICAgICAgICBgJyR7ZXJyLm1lc3NhZ2V9J2BcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0pO1xuXG4gIH0pO1xuXG4gIGNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XG5cbiAgY29uc3Qgc2VydmVyID0gYXBwLmxpc3Rlbihwb3J0LCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coJ1J1bm5pbmcgb24gaHR0cDovL2xvY2FsaG9zdDonICsgcG9ydCk7XG4gIH0pO1xuXG52YXIgV29ya2VyID0gcmVxdWlyZShcIndvcmtlci1sb2FkZXI/bmFtZT1oYXNoLndvcmtlci5qcyEuL3dvcmtlclwiKTtcbnZhciB3b3JrZXIgPSBuZXcgV29ya2VyKCk7XG53b3JrZXIucG9zdE1lc3NhZ2UoXCJwYWdlQlwiKTtcbndvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuXHR2YXIgdGVtcGxhdGVwYWdlQiA9IGV2ZW50LmRhdGE7IC8vIFwiVGhpcyB0ZXh0IHdhcyBnZW5lcmF0ZWQgYnkgdGVtcGxhdGUgcGFnZUJcIlxufTtcbiIsImZ1bmN0aW9uIHdlYnBhY2tFbXB0eUNvbnRleHQocmVxKSB7XG5cdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHR0aHJvdyBlO1xufVxud2VicGFja0VtcHR5Q29udGV4dC5rZXlzID0gZnVuY3Rpb24oKSB7IHJldHVybiBbXTsgfTtcbndlYnBhY2tFbXB0eUNvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG53ZWJwYWNrRW1wdHlDb250ZXh0LmlkID0gMzU3OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgV29ya2VyKF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJoYXNoLndvcmtlci5qc1wiKTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==