---
layout: single
---
<div class="product-details gallery-2-col">
  <div><img src="{{ page.image }}" alt="{{ page.name }}" class="product-thumbnail"/></div>
  <div class="product-description">  
    {{ page.content }}
    <div>
      <button class="snipcart-add-item"
        data-item-name="{{ page.name }}"
        data-item-id="{{ page.sku }}"
        data-item-image="{{ page.image }}"
        data-item-url="{{ site.baseurl }}"
        data-item-price="{{ page.price }}">
        Buy it for $ {{ page.price }}
      </button>
    </div>
  </div>
</div>
<div class=clear-both></div>
<div class="product-reviews">
  {% assign reviews = site.data.reviews | where:'product',page.slug %}
  {% assign reviewCount = reviews | size %}
  {% assign sum = 0 %}
  {% for review in reviews %}
    {% assign sum = sum | plus: review.review %}
  {% endfor %}

  <h3>
    {% if reviewCount > 0 %}
      {% assign sum = sum | divided_by:reviewCount %}
      (Rating Average: {{ sum | round: 1 }})
    {% endif %}
  </h3>
  <form class="js-form form" method="POST" action="https://api.staticman.net/v2/entry/donaldboulton/DWB/gh-pages/reviews" oninput="result.value=parseInt(this['fields[review]'].value)">
    <input name="fields[product]" type="hidden" value="{{ page.slug }}" />
    <input name="options[redirect]" type="hidden" value="{{site.url}}{{site.baseurl}}{{ page.url }}" />

    <h4>Add a review</h4>
    <p><label>Your name: <input type="text" name="fields[name]" /></label></p>
    <div id="fields-review"class="field-group rating-select"><span>Rating:&nbsp;</span><label class="rating-radio-label" for="comment-form[star-1]"> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="1" name="fields[review]" id="comment-form[star-1]" checked=""> <label class="rating-radio-label" for="comment-form[star-2]"> <svg class="icon icon--star_border rating-star rating-radio-star--off"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star_border"></use>star_border</svg> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="2" name="fields[review]" id="comment-form[star-2]"> <label class="rating-radio-label" for="comment-form[star-3]"> <svg class="icon icon--star_border rating-star rating-radio-star--off"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star_border"></use>star_border</svg> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="3" name="fields[review]" id="comment-form[star-3]"> <label class="rating-radio-label" for="comment-form[star-4]"> <svg class="icon icon--star_border rating-star rating-radio-star--off"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star_border"></use>star_border</svg> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="4" name="fields[review]" id="comment-form[star-4]"> <label class="rating-radio-label" for="comment-form[star-5]"> <svg class="icon icon--star_border rating-star rating-radio-star--off"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star_border"></use>star_border</svg> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="5" name="fields[review]" id="comment-form[star-5]"></div>
    <p>Average:&nbsp;<output for="fields-review" name="result">5</output>/5</p>
    <p><label>Comment: <input type="text" name="fields[message]" /></label></p>
    <p><button class="btn btn--primary" type="submit">Save review</button></p>
  </form>
  <ul>
    {% for review in reviews %}
    <li>
      <b>{{ review.review }}/5</b>  by <b>{{ review.name }}</b> on <i>{{ review.date | date: '%B %d, %Y' }}</i>
      {% if review.message %}
      <p>
        {{review.message}}
      </p>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
</div>
