---
layout: single
---

<div class="product-container gallery-2-col">    
  <div><img src="{{ page.image }}" alt="{{ page.name }}" class="product-thumbnail"/></div>  
  <div class="product-container">
    {% include product-styles.html product=page %}
    <div class="product-details" id="add">
      <h3>{{ page.name }}</h3>
      {{ page.description_markdown | markdownify }}

      <h4>${{ page.price }}</h4>
      <div class="button">{% include snipcart-button.html product=page %}</div>
    </div>
</div>
<div class=clear-both></div>
<div class="product-reviews">
  {% assign reviews = site.data.reviews | where:'product',page.slug %}
  {% assign reviewCount = reviews | size %}
  {% assign sum = 0 %}
  {% for review in reviews %}
    {% assign sum = sum | plus: review.review %}
  {% endfor %}

  <h3>
    {% if reviewCount > 0 %}
      {% assign sum = sum | divided_by:reviewCount %}
      (Rating Average: {{ sum | round: 1 }})
    {% endif %}
  </h3>
  <form class="js-form form" method="POST" action="https://api.staticman.net/v2/entry/donaldboulton/DWB/gh-pages/reviews" oninput="result.value=parseInt(this['fields[review]'].value)">
    <input name="fields[product]" type="hidden" value="{{ page.slug }}" />
    <input name="options[redirect]" type="hidden" value="{{site.url}}{{site.baseurl}}{{ page.url }}" />
    <h4>Add a review</h4>
    <div id="fields-review"class="field-group rating-select"><span>Rating:&nbsp;</span><label class="rating-radio-label" for="comment-form[star-1]"> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="1" name="fields[review]" id="comment-form[star-1]" checked=""> <label class="rating-radio-label" for="comment-form[star-2]"> <svg class="icon icon--star_border rating-star rating-radio-star--off"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star_border"></use>star_border</svg> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="2" name="fields[review]" id="comment-form[star-2]"> <label class="rating-radio-label" for="comment-form[star-3]"> <svg class="icon icon--star_border rating-star rating-radio-star--off"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star_border"></use>star_border</svg> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="3" name="fields[review]" id="comment-form[star-3]"> <label class="rating-radio-label" for="comment-form[star-4]"> <svg class="icon icon--star_border rating-star rating-radio-star--off"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star_border"></use>star_border</svg> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="4" name="fields[review]" id="comment-form[star-4]"> <label class="rating-radio-label" for="comment-form[star-5]"> <svg class="icon icon--star_border rating-star rating-radio-star--off"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star_border"></use>star_border</svg> <svg class="icon icon--star rating-star rating-radio-star--on"><use xmlns:xlink="https://www.w3.org/1999/xlink" xlink:href="/build/icons/icons.svg#icon-star"></use>star</svg> </label> <input class="rating-radio" type="radio" value="5" name="fields[review]" id="comment-form[star-5]"></div>
    <div>Average:&nbsp;<output for="fields-review" name="result">5</output>/5</div>
    <div class="form-group">
      <label class="sr-only" for="name">Your name:</label>
      <input id="name" type="text" name="fields[name]" required placeholder="Your Name *" />
    </div>
    <div class="form-group">
        <label class="sr-only" for="review-form[email]">Your email</label>
        <input type="email" id="review-form[email]" name="email" required placeholder="Your Email *"/>
      </div>
      <div class="form-group">
          <label class="sr-only" for="review-form[url]"><strong>Website</strong> <small>(optional)</small></label>
          <input type="url" id="review-form[url]" name="url" placeholder="Website (optional)"/>
        </div>
        <div class="form-group">
            <label class="sr-only" for="review-form[title]">Review Title</label>
            <input type="text" id="review-form[title]" name="title" required placeholder="Review Title *"/>
          </div>
      <div class="form-group">
        <label for="review-form[description]">Review Description<abbr class="abbr" title="Required">&nbsp;*</abbr><small>&nbsp;(<a href="https://kramdown.gettalong.org/quickref.html">Markdown</a> is allowed)</small></label>
        <textarea maxlength="200" name="fields[description]" type="text" rows="6" id="review-form[description]" placeholder="Message * 200 chars" required></textarea>
      </div>
      <div>Please Agree to Our <a href="https://donboulton.com/terms">Terms and Conditions</a>&nbsp;<abbr class="abbr" title="Required">&nbsp;*&nbsp;</abbr></div>
      <div class="enable-push">
        <div class="toggle-switch">
          <input aria-label="Terms and Conditions" id="field_terms_review" name="field_terms_review" value="field_terms_review" type="checkbox" />
          <label for="field_terms_review"></label>
        </div>
      </div>
    <div class="form-group"><button class="btn btn--primary" type="submit">Save review</button></div>
  </form>
  <article itemscope itemtype="https://schema.org/Review" class="gallery-item">
  <ul>
    {% for review in reviews %}
    <li>
      <div class="group field-group1" itemprop="reviewRating" itemscope itemtype="https://schema.org/Rating">
        <div><span class="item-reviewed">Item Reviewed</span></div>
        <div itemprop="itemReviewed" itemscope itemtype="https://schema.org/Thing">
            <span itemprop="name">{{ review.product | strip_html }}</span>
        </div>
        <div class="review__date">
            {% if review.date %}
            {% if review.index %}<a href="#review{{ review.index }}" itemprop="url">{% endif %}
                <span class="heading">Dated:&nbsp;</span><time datetime="{{ review.date | date_to_xmlschema }}" itemprop="datePublished">{{ review.date | date: "%B %d, %Y at %I:%M %p" }}</time>
            {% if review.index %}</a>{% endif %}
            {% endif %}
        </div>
        <div class="group" itemprop="reviewRating" itemscope itemtype="https://schema.org/Rating">
        <span class="heading">Rating:</span>
        {% for i in (1..review.review) %}
          <svg class="icon icon--star rating-star rating-radio-star--on"><use xlink:href="{{ 'icons.svg#icon-star' | prepend: 'build/icons/' | relative_url }}"></use></svg>
        {% endfor %}
        </div>
      </div>
      <meta type="hidden" itemprop="ratingValue" content="{{ reviewData.review }}">
    </li>
    <li>
        <div itemprop="author" class="review-author" itemscope itemtype="https://schema.org/Person">
          <div class="heading">Author</div>
            <img itemprop="image" avatar="{{ review.name }}" alt="{{ review.name }}" class="review-avatar-image text-left" />
            {% unless review.url == blank %}
            <small><span class="review-author-name">
              <span itemprop="url">
                <a rel="noreferrer" title="{{ review.name | strip_html }}" href="{{ review.url }}"></span>
                  <span itemprop="name">{{ review.name | strip_html }}</span>
                </a>
              {% else %}
                {{ review.name | strip_html }}
              {% endunless %}
            </span></small>
        </div>
        <div class="entry-meta" itemprop="aggregateRating" itemscope itemtype="https://schema.org/AggregateRating">
          <div>{{ review.review }}/5</div>
        </div>
      </h3>Revtew Title</h3>
      <div>{{ review.title }}</div>
     </li>
     <li>
      {% if review.message %}
      <div itemprop="reviewBody"> 
        {{review.message}}
      </div>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
  <span style="display: none;" itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
    <meta class="hidden" itemprop="name" content="donboulton.com">
  </span>
  <meta itemprop="url" type="hidden" value="{{ page.url | absolute_url }}">
  <input type="hidden" name="options[parent]" value="{{ page.url | absolute_url }}">
  </article>
</div>
