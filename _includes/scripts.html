{% if site.footer_scripts %}
  {% for script in site.footer_scripts %}
    {% if script contains "://" %}
      {% capture script_path %}{{ script }}{% endcapture %}
    {% else %}
      {% capture script_path %}{{ script | relative_url }}{% endcapture %}
    {% endif %}
<script src="{{ script_path }}"></script>
  {% endfor %}
{% else %}
<script src="{{ '/build/js/vendor/jquery/jquery-3.3.1.min.js' | relative_url }}"></script>
<script src="{{ '/build/js/vendor/letter-avatar/letter-avatar.js' | relative_url }}"></script>
{% endif %}

{% if site.search == true or page.layout == "search" %}
  {%- assign search_provider = site.search_provider | default: "lunr" -%}
  {%- case search_provider -%}
    {%- when "lunr" -%}
      {% include search/lunr-search-scripts.html %}
    {%- when "google" -%}
      {% include search/google-search-scripts.html %}
    {%- when "algolia" -%}
      {% include search/algolia-search-scripts.html %}
  {%- endcase -%}
{% endif %}

{% if page.support contains 'gallery' %}
  <script src="{{ '/public/lightgallery.min.js' | relative_url }}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.5/isotope.pkgd.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.3/picturefill.min.js" crossorigin="anonymous"></script>
  <script src="{{ '/build/dist/js/imagesloaded.pkgd.min.js' | relative_url }}"></script>
  <script src="{{ '/build/dist/modules/lg-autoplay.min.js' | relative_url }}"></script>
  <script src="{{ '/build/dist/modules/lg-fullscreen.min.js' | relative_url }}"></script>
  <script src="{{ '/build/dist/modules/lg-share.min.js' | relative_url }}"></script>
  <script src="{{ '/build/dist/modules/lg-thumbnail.min.js' | relative_url }}"></script>
  <script src="{{ '/build/dist/modules/lg-zoom.min.js' | relative_url }}"></script>
  <script src="{{ '/build/dist/js/init-lightgallery.js' | relative_url }}"></script>
{% endif %}

{% if page.support contains 'places' %}
  <script src="{{ '/build/js/vendor/google-places/google-places.js' | relative_url }}" crossorigin="anonymous"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcWFi5XIFAY_L9Kkfh2fT46p_rFJyjDHA&libraries=places" crossorigin="anonymous"></script>
  <script>
    $(document).ready(function() {
      $("#google-reviews").googlePlaces({
          placeId: 'ChIJl8xKnrUPsocR1zXyyP-1-c4'
        , render: ['reviews','address','hours','phone','staticMap']
        , min_rating: 4
        , max_rows: 3
        , map_plug_id: 'ChIJl8xKnrUPsocR1zXyyP-1-c4'
        , schema:{
              displayElement: "#schema"
            , type: 'Article'
            , beforeText: 'Google Users Have Rated'
            , middleText: 'based on'
            , afterText: 'ratings and reviews'
          }
        , address:{
            displayElement: "#custom-address-id"
          }
        , staticMap:{
            displayElement: "#google-static-map"
          }
      });
      function initMap() {
          var uluru = {lat: 35.458429035, lng: -97.634299097};
          var map = new google.maps.Map(document.getElementById('google-static-map'), {
            zoom: 16,
            center: uluru
          });
          var marker = new google.maps.Marker({
            position: uluru,
            map: map
          });
        }
    });
  </script>
  {% endif %}

{% if page.support contains 'validate' %}
<script src="{{ '/public/validation.js' | relative_url }}"></script>
{% endif %}

{% if page.support contains 'cart' %}
<script src="https://cdn.snipcart.com/scripts/2.0/snipcart.js" id="snipcart" data-api-key="NGViODk5ZDAtNmU4OC00MjI5LWIxMGMtZGZmOWEwOGRhM2M1NjM2NjE0Nzc1OTQ2NzMzMTU5" crossorigin="anonymous"></script>
{% endif %}

{% if page.support contains 'cookies' %}
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/cookie-bar/cookiebar-latest.min.js?tracking=1&showNoConsent=1&privacyPage=https%3A%2F%2Fdonboulton.com%2Fterms%23cookies--beacons"></script>
{% endif %}

{% if page.support contains 'dragula' %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.2/dragula.min.js" crossorigin="anonymous"></script>
  <script src="{{ '/build/js/vendor/dragula/example.min.js' | relative_url }}"></script>
{% endif %}

{% if page.support contains 'lightbox' %}
   {% include lightbox.html %}
{% endif %}

{% if page.support contains 'weather' %}
<script src="{{ '/build/js/vendor/weather/weather.js' | relative_url }}"></script>
<script type="text/javascript">
    Weather.getCurrent( "4544349", function( current ) {
        $( "#current" ).html( "Temperature: " + current.temperature() + "&deg;K or " +
            Weather.kelvinToFahrenheit( current.temperature() ) + "&deg;F or " +
            Weather.kelvinToCelsius( current.temperature() ) + "&deg;C" +
            "<br />Current Conditions: " + current.conditions() );
    });
    Weather.getForecast( "4544349", function ( forecast ) {
        $( "#forecast" ).html( "High: " + forecast.high() + "&deg;K or " +
            Weather.kelvinToFahrenheit( forecast.high() ) + "&deg;F or " +
            Weather.kelvinToCelsius( forecast.high() ) + "&deg;C<br />Low: " +
            forecast.low() + "&deg;K or " +
            Weather.kelvinToFahrenheit( forecast.low() ) + "&deg;F or " +
            Weather.kelvinToCelsius( forecast.low() ) + "&deg;C" );
    });
</script>
{% endif %}

{% if page.support contains 'calendar' %}
<script src="{{ '/build/jquery-ui/superagent.js' | relative_url }}"></script>
<script src="{{ '/build/jquery-ui/fullcalendar.min.js' | relative_url }}"></script>
<script src="{{ '/build/jquery-ui/gcal.min.js' | relative_url }}"></script>

<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');

    var calendar = new FullCalendar.Calendar(calendarEl, {
      themeSystem: 'jquery-ui',
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,listYear'
      },
      buttonText: {
        today: 'today',
        month: 'month',
        week: 'week',
        day: 'day',
        prev: '<',
        next: '>',
      },
      displayEventTime: false, 
      eventLimit: true,
      contentHeight:"auto",
      handleWindowResize:true,
      googleCalendarApiKey: 'AIzaSyAcWFi5XIFAY_L9Kkfh2fT46p_rFJyjDHA',
      
      eventSources: [
        { 
          googleCalendarId: 'donboulton@bibwoe.com',
          className: 'gcal-event' 
        },
        { 
          googleCalendarId:  'en.usa#contacts@group.v.calendar.google.com',
          className: 'fc-event' 
        }
      ],
      eventClick: function(arg) {

        window.open(arg.event.url, 'gcalevent', 'width=700,height=600');
        arg.jsEvent.preventDefault()
      },
      loading: function(bool) {
        document.getElementById('loading').style.display =
          bool ? 'block' : 'none';
      }
    });
    calendar.render();
  });
</script>
<script type="text/javascript">
      var CLIENT_ID = '857761645811-8ceeuq6uao353t3vb2jpgfqe92ufn2sj.apps.googleusercontent.com';
      var API_KEY = 'AIzaSyAcWFi5XIFAY_L9Kkfh2fT46p_rFJyjDHA';
      var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];
      var SCOPES = "https://www.googleapis.com/auth/calendar.readonly";

      var authorizeButton = document.getElementById('authorize_button');
      var signoutButton = document.getElementById('signout_button');

      /**
       *  On load, called to load the auth2 library and API client library.
       */
      function handleClientLoad() {
        gapi.load('client:auth2', initClient);
      }

      /**
       *  Initializes the API client library and sets up sign-in state
       *  listeners.
       */
      function initClient() {
        gapi.client.init({
          apiKey: API_KEY,
          clientId: CLIENT_ID,
          discoveryDocs: DISCOVERY_DOCS,
          scope: SCOPES
        }).then(function () {
          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
          authorizeButton.onclick = handleAuthClick;
          signoutButton.onclick = handleSignoutClick;
        }, function(error) {
          appendPre(JSON.stringify(error, null, 2));
        });
      }

      /**
       *  Called when the signed in status changes, to update the UI
       *  appropriately. After a sign-in, the API is called.
       */
      function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
          authorizeButton.style.display = 'none';
          signoutButton.style.display = 'block';
          listUpcomingEvents();
        } else {
          authorizeButton.style.display = 'block';
          signoutButton.style.display = 'none';
        }
      }

      /**
       *  Sign in the user upon button click.
       */
      function handleAuthClick(event) {
        gapi.auth2.getAuthInstance().signIn();
      }

      /**
       *  Sign out the user upon button click.
       */
      function handleSignoutClick(event) {
        gapi.auth2.getAuthInstance().signOut();
      }

      /**
       * Append a pre element to the body containing the given message
       * as its text node. Used to display the results of the API call.
       *
       * @param {string} message Text to be placed in pre element.
       */
      function appendPre(message) {
        var pre = document.getElementById('content');
        var textContent = document.createTextNode(message + '\n');
        pre.appendChild(textContent);
      }

      /**
       * Print the summary and start datetime/date of the next ten events in
       * the authorized user's calendar. If no events are found an
       * appropriate message is printed.
       */
      function listUpcomingEvents() {
        gapi.client.calendar.events.list({
          'calendarId': 'donboulton@bibwoe.com',
          'timeMin': (new Date()).toISOString(),
          'showDeleted': false,
          'singleEvents': true,
          'maxResults': 10,
          'orderBy': 'startTime'
        }).then(function(response) {
          var events = response.result.items;
          appendPre('Upcoming events:');

          if (events.length > 0) {
            for (i = 0; i < events.length; i++) {
              var event = events[i];
              var when = event.start.dateTime;
              if (!when) {
                when = event.start.date;
              }
              appendPre(event.summary + ' (' + when + ')')
            }
          } else {
            appendPre('No upcoming events found.');
          }
        });
      }
    </script>

    <script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>
{% endif %}

{% if page.support contains 'events' %}
<script src="{{ '/build/jquery-ui/superagent.js' | relative_url }}"></script>
<script src="{{ '/build/jquery-ui/fullcalendar.min.js' | relative_url }}"></script>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var containerEl = document.getElementById('external-events-list');
    new FullCalendar.Draggable(containerEl, {
      itemSelector: '.fc-event',
      eventData: function(eventEl) {
        return {
          title: eventEl.innerText.trim()
        }
      }
  });
  var calendarEl = document.getElementById('calendar');

  var calendar = new FullCalendar.Calendar(calendarEl, {
    themeSystem: 'jquery-ui',
    header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay,listWeek'
    },
    buttonText: {
        today: 'today',
        month: 'month',
        week: 'week',
        day: 'day',
        prev: '<',
        next: '>',
    },
    defaultDate: '2018-10-12',
    editable: true,
    droppable: true,
      drop: function(arg) {
        if (document.getElementById('drop-remove').checked) {
          arg.draggedEl.parentNode.removeChild(arg.draggedEl);
        }
    },
    navLinks: true,
    eventLimit: true,
    contentHeight:"auto",
    handleWindowResize:true,
    events: {
      url: '{{ site.baseurl }}/events.json',
      failure: function() {
        document.getElementById('script-warning').style.display = 'block'
      }
    },
    loading: function(bool) {
      document.getElementById('loading').style.display =
        bool ? 'block' : 'none';
    }
  });

  calendar.render();
});
</script>

<script type="text/javascript">
      var CLIENT_ID = '857761645811-8ceeuq6uao353t3vb2jpgfqe92ufn2sj.apps.googleusercontent.com';
      var API_KEY = 'AIzaSyAcWFi5XIFAY_L9Kkfh2fT46p_rFJyjDHA';

      var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];

      var SCOPES = "https://www.googleapis.com/auth/calendar.readonly";

      var authorizeButton = document.getElementById('authorize_button');
      var signoutButton = document.getElementById('signout_button');

      /**
       *  On load, called to load the auth2 library and API client library.
       */
      function handleClientLoad() {
        gapi.load('client:auth2', initClient);

      /**
       *  Initializes the API client library and sets up sign-in state
       *  listeners.
       */
      function initClient() {
        gapi.client.init({
          apiKey: API_KEY,
          clientId: CLIENT_ID,
          discoveryDocs: DISCOVERY_DOCS,
          scope: SCOPES
        }).then(function () {

          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);


          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
          authorizeButton.onclick = handleAuthClick;
          signoutButton.onclick = handleSignoutClick;
        }, function(error) {
          appendPre(JSON.stringify(error, null, 2));
        });
      }

      /**
       *  Called when the signed in status changes, to update the UI
       *  appropriately. After a sign-in, the API is called.
       */
      function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
          authorizeButton.style.display = 'none';
          signoutButton.style.display = 'block';
          listUpcomingEvents();
        } else {
          authorizeButton.style.display = 'block';
          signoutButton.style.display = 'none';
        }
      }

      /**
       *  Sign in the user upon button click.
       */
      function handleAuthClick(event) {
        gapi.auth2.getAuthInstance().signIn();
      }

      /**
       *  Sign out the user upon button click.
       */
      function handleSignoutClick(event) {
        gapi.auth2.getAuthInstance().signOut();
      }

      /**
       * Append a pre element to the body containing the given message
       * as its text node. Used to display the results of the API call.
       *
       * @param {string} message Text to be placed in pre element.
       */
      function appendPre(message) {
        var pre = document.getElementById('content');
        var textContent = document.createTextNode(message + '\n');
        pre.appendChild(textContent);
      }

      /**
       * Print the summary and start datetime/date of the next ten events in
       * the authorized user's calendar. If no events are found an
       * appropriate message is printed.
       */
      function listUpcomingEvents() {
        gapi.client.calendar.events.list({
          'calendarId': 'donaldboulton@gmail.com',
          'timeMin': (new Date()).toISOString(),
          'showDeleted': false,
          'singleEvents': true,
          'maxResults': 10,
          'orderBy': 'startTime'
        }).then(function(response) {
          var events = response.result.items;
          appendPre('Upcoming events:');

          if (events.length > 0) {
            for (i = 0; i < events.length; i++) {
              var event = events[i];
              var when = event.start.dateTime;
              if (!when) {
                when = event.start.date;
              }
              appendPre(event.summary + ' (' + when + ')')
            }
          } else {
            appendPre('No upcoming events found.');
          }
        });
      }
    </script>

    <script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>
{% endif %}

{% if page.youtube == true %}
<script src="{{ '/build/js/vendor/fitvids/jquery.fitvids.min.js' | relative_url }}"></script>
<script>
  $("#main").fitVids();
</script>
{% endif %}

{% if page.comments == true %}
  <script src="{{ '/build/js/staticman/staticman-comments.js' | relative_url }}"></script>
{% endif %}

{% if page.anchor == true %}
<script asnyc src="{{ '/build/js/vendor/anchor/anchor.js' | relative_url }}"></script>
<script>
document.addEventListener("DOMContentLoaded", function(event) {
anchors.options = {
  visible: 'always',
  placement: 'left',
  icon: '¶'
};
anchors.add('p');
});
</script>
{% endif %}
{% if page.footnotes == true %}
  <script asnyc src="{{ '/build/js/vendor/bigfoot/bigfoot.min.js' | relative_url }}"></script>
  <script>
    var bigfoot = $.bigfoot(
        {
            deleteOnUnhover: false,
            preventPageScroll: false,
            hoverDelay: 250
        }
    );
  </script>
{% endif %}
<script async defer src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script asnyc src="{{ '/public/init.site.sw.js' | relative_url }}"></script>
{% if page.chat == true %}
<script src="https://embed.small.chat/T8PMJ5ZNYGDRA9BJEA.js" async></script>
{% endif %}
{% if page.webmentions == true %}
<script type="text/javascript" src="https://webmention.io/js/mentions.js"></script>
{% endif %}

{% if page.support contains 'github' %}
<script asnyc src="/public/widget.js"></script>
{% endif %}
