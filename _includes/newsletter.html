<form id="newsletter" class="form-signin" method="post" action="/.netlify/functions/form-handler">
  <div id="message"></div>
  <h2>Sign up for newsletter</h2>
  <label for="inputEmail" class="sr-only">Email address</label>
  <input type="email" id="inputEmail" name='email' class="form-control" placeholder="Email address" required autofocus>
  <button class="btn btn-lg btn--primary" type="submit">Sign up for newsletter</button>
</form>  

  <script>
    var form = document.getElementById('newsletter')
    form.addEventListener("submit", function(e) {
        // stop form from submitting
        e.preventDefault()
        var email = document.getElementById('inputEmail').value
        submitEmail(email)
    })
    function submitEmail(email) {
      fetch('/.netlify/functions/form-handler', {
          method: 'post',
          body: JSON.stringify({
            email: email
          })
        }).then(function(response) {
          return response.json()
        }).then(function(data) {
          console.log('data from function', data)
          var messageDiv = document.getElementById('message')
          messageDiv.innerText = 'Email added via AJAX! Turn on JS to try the progressively enhanced fallback'
        })
    }
  </script>
